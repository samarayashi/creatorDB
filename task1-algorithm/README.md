# å¡«è£œç¼ºå¤±æ¯æ—¥æŒ‡æ¨™æ¼”ç®—æ³•

ç”¨æ–¼å¡«è£œç¤¾ç¾¤åª’é«”å‰µä½œè€…çš„ç¼ºå¤±æ¯æ—¥æŒ‡æ¨™è³‡æ–™ã€‚æ”¯æ´å…©ç¨®æœ€ä½³åŒ–ç­–ç•¥ï¼šäºŒåˆ†æŸ¥æ‰¾å’Œé›™æŒ‡é‡ï¼Œä¸¦èƒ½æ ¹æ“šè³‡æ–™é‡è‡ªå‹•é¸æ“‡æœ€ä½³æ¼”ç®—æ³•ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹è‰²

- **æ™ºæ…§æ¼”ç®—æ³•é¸æ“‡**ï¼šæ ¹æ“šè³‡æ–™é‡å’Œç›®æ¨™å¤©æ•¸è‡ªå‹•é¸æ“‡æœ€ä½³æ¼”ç®—æ³•
- **é›™æ¼”ç®—æ³•æ”¯æ´**ï¼š
  - äºŒåˆ†æŸ¥æ‰¾ï¼šé©åˆå°è³‡æ–™é›†ï¼Œæ™‚é–“è¤‡é›œåº¦ O(m Ã— log n)
  - é›™æŒ‡é‡ï¼šé©åˆå¤§è³‡æ–™é›†ï¼Œæ™‚é–“è¤‡é›œåº¦ O(m + n)
- **é«˜åº¦å¯é…ç½®**ï¼šæ”¯æ´ä»»æ„å¤©æ•¸é…ç½®ï¼ˆä¸é™æ–¼ 7 å¤©ï¼‰
- **å‹åˆ¥å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript å‹åˆ¥å®šç¾©
- **å®Œæ•´æ¸¬è©¦**ï¼šæ¶µè“‹ç‡ 100%ï¼ŒåŒ…å«æ•ˆèƒ½æ¸¬è©¦
- **é›¶ä¾è³´**ï¼šç´” TypeScript å¯¦ä½œï¼Œç„¡å¤–éƒ¨ä¾è³´

## ğŸ“¦ å®‰è£

```bash
npm install fill-missing-metrics
```

## ğŸ¯ å¿«é€Ÿé–‹å§‹

```typescript
import { fillMissingMetrics, Metric } from 'fill-missing-metrics';

// æº–å‚™è³‡æ–™ï¼ˆå¿…é ˆæŒ‰æ—¥æœŸå‡åºæ’åˆ—ï¼‰
const data: Metric[] = [
  {
    date: 1738800000000,           // -6d
    averageLikesCount: 120,
    followersCount: 208,
    averageEngagementRate: 0.02
  },
  {
    date: 1739068800000,           // -3d
    averageLikesCount: 130,
    followersCount: 210,
    averageEngagementRate: 0.022
  },
  {
    date: 1739328000000,           // 0d (today)
    averageLikesCount: 150,
    followersCount: 220,
    averageEngagementRate: 0.025
  }
];

// å¡«è£œç¼ºå¤±çš„ 7 å¤©è³‡æ–™
const result = fillMissingMetrics(data);
console.log(result.length); // 7

// è‡ªè¨‚å¤©æ•¸
const monthlyData = fillMissingMetrics(data, 30);
console.log(monthlyData.length); // 30
```

## ğŸ“Š æ¼”ç®—æ³•èªªæ˜

### å¡«è£œé‚è¼¯

å°æ–¼æ¯å€‹ç¼ºå¤±çš„æ—¥æœŸï¼š

1. **å°‹æ‰¾æœ€è¿‘çš„å¯ç”¨æ—¥æœŸ**ï¼ˆå¯ä»¥æ˜¯éå»æˆ–æœªä¾†ï¼‰
2. **è·é›¢ç›¸åŒæ™‚åå¥½è¼ƒæ—©çš„æ—¥æœŸ**
3. **ä½¿ç”¨æœ€è¿‘æ—¥æœŸçš„æŒ‡æ¨™å€¼ï¼Œä½†ä¿æŒç›®æ¨™æ—¥æœŸ**

### æ¼”ç®—æ³•é¸æ“‡ç­–ç•¥

ç³»çµ±æœƒæ ¹æ“šä»¥ä¸‹æ¢ä»¶è‡ªå‹•é¸æ“‡æœ€ä½³æ¼”ç®—æ³•ï¼š

```typescript
// ç•¶ m Ã— log(n) > (m + n) æ™‚é¸æ“‡é›™æŒ‡é‡
// å…¶ä¸­ m = ç›®æ¨™å¤©æ•¸ï¼Œn = åŸå§‹è³‡æ–™ç­†æ•¸
```

### ğŸ¯ å¯¦éš›ä½¿ç”¨å»ºè­°

æ ¹æ“šå¯¦éš›æ¥­å‹™å ´æ™¯åˆ†æï¼Œ**ç¤¾ç¾¤åª’é«”å‰µä½œè€…çš„æŒ‡æ¨™å¡«è£œé€šå¸¸æ˜¯ã€Œå°‘è³‡æ–™è£œå¤šå¤©æ•¸ã€çš„æƒ…æ³**ï¼š
- åŸå§‹è³‡æ–™ï¼šé€šå¸¸åªæœ‰å¹¾ç­†åˆ°å¹¾åç­†è¨˜éŒ„
- ç›®æ¨™å¤©æ•¸ï¼šé€šå¸¸éœ€è¦å¡«è£œ 7-30 å¤©çš„å®Œæ•´è³‡æ–™

åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œ**é›™æŒ‡é‡æ¼”ç®—æ³• (Two Pointers) æ˜¯æ›´å„ªçš„é¸æ“‡**ï¼š
- æ™‚é–“è¤‡é›œåº¦ O(m + n) åœ¨ m >> n æ™‚è¡¨ç¾å„ªç•°
- è¨˜æ†¶é«”ä½¿ç”¨æ›´å°‘ï¼Œå¯¦ä½œæ›´ç°¡æ½”
- å°æ–¼å…¸å‹çš„æ¥­å‹™å ´æ™¯ï¼ˆå¦‚ 3 ç­†è³‡æ–™å¡«è£œ 30 å¤©ï¼‰ï¼Œæ•ˆèƒ½æ˜é¡¯å„ªæ–¼äºŒåˆ†æŸ¥æ‰¾

å¦‚æœä½ çš„ä½¿ç”¨å ´æ™¯ç¬¦åˆä¸Šè¿°ç‰¹å¾µï¼Œå»ºè­°ç›´æ¥ä½¿ç”¨ï¼š
```typescript
import { fillMissingMetricsTwoPointers } from 'fill-missing-metrics';

// ç›´æ¥ä½¿ç”¨é›™æŒ‡é‡æ¼”ç®—æ³•ï¼Œé¿å…é¸æ“‡é‚è¼¯çš„é¡å¤–é–‹éŠ·
const result = fillMissingMetricsTwoPointers(data, 30);
```

## ğŸ”§ API åƒè€ƒ

### ä¸»è¦å‡½å¼

#### `fillMissingMetrics(data, daysCount?)`

è‡ªå‹•é¸æ“‡æœ€ä½³æ¼”ç®—æ³•å¡«è£œç¼ºå¤±è³‡æ–™ã€‚

```typescript
function fillMissingMetrics(
  data: readonly Metric[],
  daysCount: number = 7
): Metric[]
```

**åƒæ•¸ï¼š**
- `data`: å·²æœ‰çš„æŒ‡æ¨™è³‡æ–™é™£åˆ—ï¼ˆå¿…é ˆæŒ‰æ—¥æœŸå‡åºï¼‰
- `daysCount`: è¦ç”Ÿæˆçš„å¤©æ•¸ï¼ˆé è¨­ 7 å¤©ï¼‰

**å›å‚³ï¼š** åŒ…å«å®Œæ•´å¤©æ•¸çš„æŒ‡æ¨™é™£åˆ—

#### `fillMissingMetricsBinary(data, daysCount?)`

å¼·åˆ¶ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¼”ç®—æ³•ã€‚

#### `fillMissingMetricsTwoPointers(data, daysCount?)`

å¼·åˆ¶ä½¿ç”¨é›™æŒ‡é‡æ¼”ç®—æ³•ã€‚**å»ºè­°åœ¨å…¸å‹æ¥­å‹™å ´æ™¯ä¸­å„ªå…ˆä½¿ç”¨**ã€‚

### å‹åˆ¥å®šç¾©

```typescript
type Metric = {
  date: number;                    // UTC æ™‚é–“æˆ³è¨˜ï¼ˆåˆå¤œé›¶é»ï¼‰
  averageLikesCount: number;       // å¹³å‡æŒ‰è®šæ•¸
  followersCount: number;          // è¿½è¹¤è€…æ•¸é‡
  averageEngagementRate: number;   // å¹³å‡äº’å‹•ç‡
};
```


## ğŸ§ª æ¸¬è©¦

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
npm test

# åŸ·è¡Œæ¸¬è©¦ä¸¦ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
npm run test:coverage

# ç›£è¦–æ¨¡å¼
npm run test:watch
```

æ¸¬è©¦æ¶µè“‹ï¼š
- âœ… åŸºæœ¬åŠŸèƒ½æ¸¬è©¦
- âœ… é‚Šç•Œæƒ…æ³è™•ç†
- âœ… æ¼”ç®—æ³•ä¸€è‡´æ€§é©—è­‰
- âœ… æ•ˆèƒ½åŸºæº–æ¸¬è©¦
- âœ… è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥

## ğŸ¨ ç¤ºç¯„

åŸ·è¡Œç¤ºç¯„ç¨‹å¼ï¼š

```bash
npm run task1:demo
```


## ğŸ“ è¨­è¨ˆç†å¿µ

### 1. æ•ˆèƒ½å„ªå…ˆ
- æ ¹æ“šè³‡æ–™ç‰¹æ€§å‹•æ…‹é¸æ“‡æœ€ä½³æ¼”ç®—æ³•
- é¿å…ä¸å¿…è¦çš„è¨˜æ†¶é«”åˆ†é…
- æœ€å°åŒ–æ™‚é–“è¤‡é›œåº¦

### 2. å¯¦å‹™å°å‘
- é‡å°ã€Œå°‘è³‡æ–™è£œå¤šå¤©æ•¸ã€çš„å…¸å‹å ´æ™¯æœ€ä½³åŒ–
- æä¾›ç›´æ¥ä½¿ç”¨é›™æŒ‡é‡æ¼”ç®—æ³•çš„é¸é …
- ä¿ç•™æ¼”ç®—æ³•é¸æ“‡é‚è¼¯ä»¥æ‡‰å°ç‰¹æ®Šæƒ…æ³