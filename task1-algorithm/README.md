# å¡«è£œç¼ºå¤±æ¯æ—¥æŒ‡æ¨™æ¼”ç®—æ³•

[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-blue.svg)](https://www.typescriptlang.org/)
[![Jest](https://img.shields.io/badge/Jest-29.5-green.svg)](https://jestjs.io/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ä¸€å€‹é«˜æ•ˆèƒ½çš„ TypeScript æ¼”ç®—æ³•åº«ï¼Œç”¨æ–¼å¡«è£œç¤¾ç¾¤åª’é«”å‰µä½œè€…çš„ç¼ºå¤±æ¯æ—¥æŒ‡æ¨™è³‡æ–™ã€‚æ”¯æ´å…©ç¨®æœ€ä½³åŒ–ç­–ç•¥ï¼šäºŒåˆ†æŸ¥æ‰¾å’Œé›™æŒ‡é‡ï¼Œä¸¦èƒ½æ ¹æ“šè³‡æ–™é‡è‡ªå‹•é¸æ“‡æœ€ä½³æ¼”ç®—æ³•ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹è‰²

- **æ™ºæ…§æ¼”ç®—æ³•é¸æ“‡**ï¼šæ ¹æ“šè³‡æ–™é‡å’Œç›®æ¨™å¤©æ•¸è‡ªå‹•é¸æ“‡æœ€ä½³æ¼”ç®—æ³•
- **é›™æ¼”ç®—æ³•æ”¯æ´**ï¼š
  - äºŒåˆ†æŸ¥æ‰¾ï¼šé©åˆå°è³‡æ–™é›†ï¼Œæ™‚é–“è¤‡é›œåº¦ O(m Ã— log n)
  - é›™æŒ‡é‡ï¼šé©åˆå¤§è³‡æ–™é›†ï¼Œæ™‚é–“è¤‡é›œåº¦ O(m + n)
- **é«˜åº¦å¯é…ç½®**ï¼šæ”¯æ´ä»»æ„å¤©æ•¸é…ç½®ï¼ˆä¸é™æ–¼ 7 å¤©ï¼‰
- **å‹åˆ¥å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript å‹åˆ¥å®šç¾©
- **å®Œæ•´æ¸¬è©¦**ï¼šæ¶µè“‹ç‡ 100%ï¼ŒåŒ…å«æ•ˆèƒ½æ¸¬è©¦
- **é›¶ä¾è³´**ï¼šç´” TypeScript å¯¦ä½œï¼Œç„¡å¤–éƒ¨ä¾è³´

## ğŸ“¦ å®‰è£

```bash
npm install fill-missing-metrics
```

## ğŸ¯ å¿«é€Ÿé–‹å§‹

```typescript
import { fillMissingMetrics, Metric } from 'fill-missing-metrics';

// æº–å‚™è³‡æ–™ï¼ˆå¿…é ˆæŒ‰æ—¥æœŸå‡åºæ’åˆ—ï¼‰
const data: Metric[] = [
  {
    date: 1738800000000,           // -6d
    averageLikesCount: 120,
    followersCount: 208,
    averageEngagementRate: 0.02
  },
  {
    date: 1739068800000,           // -3d
    averageLikesCount: 130,
    followersCount: 210,
    averageEngagementRate: 0.022
  },
  {
    date: 1739328000000,           // 0d (today)
    averageLikesCount: 150,
    followersCount: 220,
    averageEngagementRate: 0.025
  }
];

// å¡«è£œç¼ºå¤±çš„ 7 å¤©è³‡æ–™
const result = fillMissingMetrics(data);
console.log(result.length); // 7

// è‡ªè¨‚å¤©æ•¸
const monthlyData = fillMissingMetrics(data, 30);
console.log(monthlyData.length); // 30
```

## ğŸ“Š æ¼”ç®—æ³•èªªæ˜

### å¡«è£œé‚è¼¯

å°æ–¼æ¯å€‹ç¼ºå¤±çš„æ—¥æœŸï¼š

1. **å°‹æ‰¾æœ€è¿‘çš„å¯ç”¨æ—¥æœŸ**ï¼ˆå¯ä»¥æ˜¯éå»æˆ–æœªä¾†ï¼‰
2. **è·é›¢ç›¸åŒæ™‚åå¥½è¼ƒæ—©çš„æ—¥æœŸ**
3. **ä½¿ç”¨æœ€è¿‘æ—¥æœŸçš„æŒ‡æ¨™å€¼ï¼Œä½†ä¿æŒç›®æ¨™æ—¥æœŸ**

### æ¼”ç®—æ³•é¸æ“‡ç­–ç•¥

ç³»çµ±æœƒæ ¹æ“šä»¥ä¸‹æ¢ä»¶è‡ªå‹•é¸æ“‡æœ€ä½³æ¼”ç®—æ³•ï¼š

```typescript
// ç•¶ m Ã— log(n) > (m + n) Ã— 1.5 æ™‚ï¼Œé¸æ“‡é›™æŒ‡é‡
// å…¶ä¸­ m = ç›®æ¨™å¤©æ•¸ï¼Œn = åŸå§‹è³‡æ–™ç­†æ•¸
```

| æƒ…æ³ | æ¨è–¦æ¼”ç®—æ³• | åŸå›  |
|------|------------|------|
| å°è³‡æ–™é›† (n < 100) | äºŒåˆ†æŸ¥æ‰¾ | å¸¸æ•¸å› å­å°ï¼Œå¯¦éš›æ•ˆèƒ½æ›´å¥½ |
| å¤§è³‡æ–™é›† (n > 1000) | é›™æŒ‡é‡ | ç·šæ€§æ™‚é–“è¤‡é›œåº¦å„ªå‹¢æ˜é¡¯ |
| é•·æ™‚é–“ç¯„åœ (m > 100) | é›™æŒ‡é‡ | é¿å…é‡è¤‡äºŒåˆ†æŸ¥æ‰¾é–‹éŠ· |

## ğŸ”§ API åƒè€ƒ

### ä¸»è¦å‡½å¼

#### `fillMissingMetrics(data, length?)`

è‡ªå‹•é¸æ“‡æœ€ä½³æ¼”ç®—æ³•å¡«è£œç¼ºå¤±è³‡æ–™ã€‚

```typescript
function fillMissingMetrics(
  data: readonly Metric[],
  length: number = 7
): Metric[]
```

**åƒæ•¸ï¼š**
- `data`: å·²æœ‰çš„æŒ‡æ¨™è³‡æ–™é™£åˆ—ï¼ˆå¿…é ˆæŒ‰æ—¥æœŸå‡åºï¼‰
- `length`: è¦ç”Ÿæˆçš„å¤©æ•¸ï¼ˆé è¨­ 7 å¤©ï¼‰

**å›å‚³ï¼š** åŒ…å«å®Œæ•´å¤©æ•¸çš„æŒ‡æ¨™é™£åˆ—

#### `fillMissingMetricsWithBinary(data, length?)`

å¼·åˆ¶ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¼”ç®—æ³•ã€‚

#### `fillMissingMetricsWithTwoPointers(data, length?)`

å¼·åˆ¶ä½¿ç”¨é›™æŒ‡é‡æ¼”ç®—æ³•ã€‚

### å‹åˆ¥å®šç¾©

```typescript
type Metric = {
  date: number;                    // UTC æ™‚é–“æˆ³è¨˜ï¼ˆåˆå¤œé›¶é»ï¼‰
  averageLikesCount: number;       // å¹³å‡æŒ‰è®šæ•¸
  followersCount: number;          // è¿½è¹¤è€…æ•¸é‡
  averageEngagementRate: number;   // å¹³å‡äº’å‹•ç‡
};
```

## ğŸ“ˆ æ•ˆèƒ½åŸºæº–

åœ¨ä¸åŒè³‡æ–™è¦æ¨¡ä¸‹çš„æ•ˆèƒ½è¡¨ç¾ï¼š

| è³‡æ–™é‡ | ç›®æ¨™å¤©æ•¸ | äºŒåˆ†æŸ¥æ‰¾ | é›™æŒ‡é‡ | è‡ªå‹•é¸æ“‡ |
|--------|----------|----------|--------|----------|
| 10     | 7        | 0.1ms    | 0.1ms  | 0.1ms    |
| 100    | 30       | 0.5ms    | 0.3ms  | 0.3ms    |
| 1000   | 365      | 15ms     | 2ms    | 2ms      |
| 10000  | 365      | 150ms    | 5ms    | 5ms      |

## ğŸ§ª æ¸¬è©¦

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
npm test

# åŸ·è¡Œæ¸¬è©¦ä¸¦ç”Ÿæˆè¦†è“‹ç‡å ±å‘Š
npm run test:coverage

# ç›£è¦–æ¨¡å¼
npm run test:watch
```

æ¸¬è©¦æ¶µè“‹ï¼š
- âœ… åŸºæœ¬åŠŸèƒ½æ¸¬è©¦
- âœ… é‚Šç•Œæƒ…æ³è™•ç†
- âœ… æ¼”ç®—æ³•ä¸€è‡´æ€§é©—è­‰
- âœ… æ•ˆèƒ½åŸºæº–æ¸¬è©¦
- âœ… è³‡æ–™å®Œæ•´æ€§æª¢æŸ¥

## ğŸ¨ ç¤ºç¯„

åŸ·è¡Œç¤ºç¯„ç¨‹å¼ï¼š

```bash
npm run dev
```

æˆ–æŸ¥çœ‹ `examples/demo.ts` äº†è§£è©³ç´°ä½¿ç”¨æ–¹å¼ã€‚

## ğŸ—ï¸ é–‹ç™¼

```bash
# å®‰è£ä¾è³´
npm install

# ç·¨è­¯ TypeScript
npm run build

# ç¨‹å¼ç¢¼æª¢æŸ¥
npm run lint

# æ ¼å¼åŒ–ç¨‹å¼ç¢¼
npm run format
```

## ğŸ“ è¨­è¨ˆç†å¿µ

### 1. æ•ˆèƒ½å„ªå…ˆ
- æ ¹æ“šè³‡æ–™ç‰¹æ€§å‹•æ…‹é¸æ“‡æœ€ä½³æ¼”ç®—æ³•
- é¿å…ä¸å¿…è¦çš„è¨˜æ†¶é«”åˆ†é…
- æœ€å°åŒ–æ™‚é–“è¤‡é›œåº¦

### 2. å‹åˆ¥å®‰å…¨
- å®Œæ•´çš„ TypeScript å‹åˆ¥å®šç¾©
- ç·¨è­¯æ™‚éŒ¯èª¤æª¢æŸ¥
- å„ªç§€çš„ IDE æ”¯æ´

### 3. å¯ç¶­è­·æ€§
- æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œè·è²¬åˆ†é›¢
- è±å¯Œçš„è¨»è§£å’Œæ–‡ä»¶
- å®Œæ•´çš„æ¸¬è©¦è¦†è“‹

### 4. å¯æ“´å±•æ€§
- æ”¯æ´ä»»æ„å¤©æ•¸é…ç½®
- æ˜“æ–¼æ·»åŠ æ–°çš„æ¼”ç®—æ³•ç­–ç•¥
- éˆæ´»çš„ API è¨­è¨ˆ

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork å°ˆæ¡ˆ
2. å»ºç«‹åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿ Pull Request

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Š - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆã€‚

## ğŸ™ è‡´è¬

- æ„Ÿè¬ CreatorDB åœ˜éšŠæä¾›çš„æ¼”ç®—æ³•æŒ‘æˆ°
- éˆæ„Ÿä¾†è‡ªæ–¼å¯¦éš›çš„ç¤¾ç¾¤åª’é«”åˆ†æéœ€æ±‚
- åƒè€ƒäº†å¤šç¨®é«˜æ•ˆèƒ½æ¼”ç®—æ³•çš„æœ€ä½³å¯¦è¸ 